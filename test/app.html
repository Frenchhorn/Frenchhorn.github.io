<html lang="zh">

<head>
    <meta charset="utf-8">
    <script src="index.js"></script>
    <script>
        var source = {};
        var searchType = 'all';
        var searchWord = '';
    </script>
</head>

<body>
    <input type="radio" name="filter" value="all" checked>全部
    <br>
    <input type="radio" name="filter" value="article">作品
    <br>
    <input type="radio" name="filter" value="author">作者
    <br>
    <input type="text" id="searchWord">
    <button>搜索</button>
    <div id="searchResult">
    </div>
</body>
<script>
    //return    [Object1, Object2, Object3...]
    var getResult = function (searchWord, searchType) {
        searchWord = searchWord ? searchWord : window.searchWord;
        searchType = searchType ? searchType : window.searchType;
        console.log(searchWord, searchType)
        var searchResult = [];
        if (!searchWord) {
            return searchResult;
        }
        for (i in index) {
            if (searchType === 'article' || searchType === 'all') {
                if (index[i].name.indexOf(searchWord) > -1) {
                    searchResult.push(index[i]);
                    continue;
                }
            }
            if (searchType === 'author' || searchType === 'all') {
                if (index[i].author && (index[i].author.indexOf(searchWord) > -1)) {
                    searchResult.push(index[i]);
                }
            }
        }
        return searchResult;
    }
    var loadResult = function (searchResult) {
        var searchResultElement = document.getElementById('searchResult');
        var itemElement;
        for (var i = 0; i < searchResult.length; i++) {
            itemElement = document.createElement('div');
            itemElement.innerText = 'Name: ' + searchResult[i].name + ' ' + 'Author: ' + searchResult[i].author + ' ' + 'Location: ' + searchResult[i].contributor;
            searchResultElement.append(itemElement);
        }
    };
    //param     searchResult   ['kosuzu','test']
    //return    null
    var loadSource = function (sourceList) {
        var headElement = document.getElementsByTagName('head')[0];
        var scriptElement;
        for (var i = 0; i < searchResult.length; i++) {
            scriptElement = document.createElement('script');
            scriptElement.src = 'source/' + searchResult[i] + '.js';
            headElement.append(script);
        }
    };
    //Event
    document.getElementsByName('filter').forEach(function (item, index) {
        item.onclick = function () {
            searchType = item.value;
        }
    });
    document.getElementById('searchWord').onkeyup = function () {
        searchWord = this.value;
        if (event.which === 13) {
            console.log('enter')
        }
    };
</script>

</html>